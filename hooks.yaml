# Legacy compatibility map (documentation only).
#
# The Rust relay runtime does not use `adnanh/webhook` + execute-command hooks.
# Active ingress is:
#   POST /webhook/github
#   POST /webhook/linear
#
# Keep this file for operator parity/reference while migrating runbooks.

version: 1
legacy_runtime: false

routes:
  - id: github
    endpoint: /webhook/github
    signature_header: X-Hub-Signature-256
    event_header: X-GitHub-Event
    delivery_header: X-GitHub-Delivery
    notes:
      - HMAC-SHA256 verified against HMAC_SECRET_GITHUB
      - event_type resolved as "<X-GitHub-Event>[.<action>]"
      - payload sanitized before enqueue
      - dedup + cooldown applied

  - id: linear
    endpoint: /webhook/linear
    signature_header: Linear-Signature
    event_header: Linear-Event
    delivery_header: Linear-Delivery
    notes:
      - HMAC-SHA256 verified against HMAC_SECRET_LINEAR
      - timestamp replay window checked via webhookTimestamp
      - event_type resolved as "<type>[.<action>]" with Linear-Event fallback
      - payload sanitized before enqueue
      - dedup + cooldown applied
