# Copy to .env and customize for your environment.
# Used by docker compose and as a reference for systemd env files.

# Shared AutoMQ broker endpoint (Kafka-compatible)
KAFKA_BROKERS=100.64.0.10:9093

# Relay secrets (public ingress)
HMAC_SECRET_GITHUB=replace-with-github-secret
HMAC_SECRET_LINEAR=replace-with-linear-secret

# OpenClaw target (consumer -> local gateway)
OPENCLAW_WEBHOOK_URL=http://127.0.0.1:18789/hooks/agent
OPENCLAW_WEBHOOK_TOKEN=replace-with-openclaw-hook-token

# Optional runtime tuning (safe defaults)
RUST_LOG=info
CONSUMER_MAX_RETRIES=5
CONSUMER_BACKOFF_BASE_SECONDS=1
CONSUMER_BACKOFF_MAX_SECONDS=30
OPENCLAW_AGENT_ID=coder
OPENCLAW_SESSION_KEY=coder:orchestrator
OPENCLAW_WAKE_MODE=now
OPENCLAW_NAME=WebhookRelay
OPENCLAW_DELIVER=true
OPENCLAW_CHANNEL=telegram
OPENCLAW_TO=-1003734912836:topic:2
OPENCLAW_MODEL=anthropic/claude-sonnet-4-6
OPENCLAW_THINKING=low
OPENCLAW_TIMEOUT_SECONDS=600
OPENCLAW_MESSAGE_MAX_BYTES=4000
OPENCLAW_HTTP_TIMEOUT_SECONDS=20

# Optional relay tuning
RELAY_BIND=0.0.0.0:8080
RELAY_MAX_PAYLOAD_BYTES=1048576
RELAY_IP_RATE_PER_MINUTE=100
RELAY_SOURCE_RATE_PER_MINUTE=500
RELAY_TRUST_PROXY_HEADERS=false
RELAY_TRUSTED_PROXY_CIDRS=127.0.0.1/32,::1/128
RELAY_DEDUP_TTL_SECONDS=604800
RELAY_COOLDOWN_SECONDS=30
RELAY_ENFORCE_LINEAR_TIMESTAMP_WINDOW=true
RELAY_LINEAR_TIMESTAMP_WINDOW_SECONDS=60
KAFKA_AUTO_CREATE_TOPICS=true
KAFKA_TOPIC_PARTITIONS=3
KAFKA_TOPIC_REPLICATION_FACTOR=1
KAFKA_DLQ_TOPIC=webhooks.dlq
RELAY_PUBLISH_QUEUE_CAPACITY=4096
RELAY_PUBLISH_MAX_RETRIES=5
RELAY_PUBLISH_BACKOFF_BASE_MS=200
RELAY_PUBLISH_BACKOFF_MAX_MS=5000

# TLS paths are container-specific in docker-compose.yml.
# For direct binary/systemd usage, set:
# KAFKA_TLS_CERT=/etc/relay/certs/relay.crt (relay)
# KAFKA_TLS_KEY=/etc/relay/certs/relay.key (relay)
# KAFKA_TLS_CA=/etc/relay/certs/ca.crt (relay)
# KAFKA_TLS_CERT=/etc/consumer/certs/consumer.crt (consumer)
# KAFKA_TLS_KEY=/etc/consumer/certs/consumer.key (consumer)
# KAFKA_TLS_CA=/etc/consumer/certs/ca.crt (consumer)
# KAFKA_GROUP_ID=kafka-openclaw-hook
# KAFKA_TOPICS=webhooks.github,webhooks.linear
