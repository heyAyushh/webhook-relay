# Copy to .env and customize for your environment.
# Used by docker compose and as a reference for systemd env files.

# Shared AutoMQ broker endpoint (Kafka-compatible)
KAFKA_BROKERS=100.64.0.10:9093

# Relay secrets (public ingress)
HMAC_SECRET_GITHUB=replace-with-github-secret
HMAC_SECRET_LINEAR=replace-with-linear-secret

# Optional runtime tuning (safe defaults)
RUST_LOG=info

# Optional relay tuning
RELAY_BIND=0.0.0.0:8080
RELAY_MAX_PAYLOAD_BYTES=1048576
RELAY_IP_RATE_PER_MINUTE=100
RELAY_SOURCE_RATE_PER_MINUTE=500
RELAY_TRUST_PROXY_HEADERS=false
RELAY_TRUSTED_PROXY_CIDRS=127.0.0.1/32,::1/128
RELAY_DEDUP_TTL_SECONDS=604800
RELAY_COOLDOWN_SECONDS=30
RELAY_ENFORCE_LINEAR_TIMESTAMP_WINDOW=true
RELAY_LINEAR_TIMESTAMP_WINDOW_SECONDS=60
KAFKA_AUTO_CREATE_TOPICS=true
KAFKA_TOPIC_PARTITIONS=3
KAFKA_TOPIC_REPLICATION_FACTOR=1
KAFKA_DLQ_TOPIC=webhooks.dlq
RELAY_PUBLISH_QUEUE_CAPACITY=4096
RELAY_PUBLISH_MAX_RETRIES=5
RELAY_PUBLISH_BACKOFF_BASE_MS=200
RELAY_PUBLISH_BACKOFF_MAX_MS=5000

# TLS paths are container-specific in docker-compose.yml.
# For direct binary/systemd usage, set:
# KAFKA_TLS_CERT=/etc/relay/certs/relay.crt (relay)
# KAFKA_TLS_KEY=/etc/relay/certs/relay.key (relay)
# KAFKA_TLS_CA=/etc/relay/certs/ca.crt (relay)
